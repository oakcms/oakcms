/*
   2014-2017 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license     GNU GPL version 3 or later
*/
if("undefined"==typeof Solo)var Solo={};
var AkeebaStepper=function(k){this.options={holder:"#stepper-holder",loading:"#stepper-loading",pane:"#stepper-progress-pane",content:"#stepper-progress-content",steps:"#stepper-steps",status:"#stepper-status",step:"#stepper-step",substep:"#stepper-substep",percentage:"#stepper-percentage",timer:"#response-timer",akeebaUrl:"index.php?view=Alice",useIframe:!1,domainUrl:"&task=domains",pollingUrl:"&task=ajax",onBeforeStart:function(a){},onBeforeStep:function(a,b){},onComplete:function(a){}};this.options=
array_merge(this.options,k||{});var b=this,d={cache:!1,data:{},dataType:"text",success:function(a){a=/###(.*?)###/.exec(a);var c=JSON.parse(a[1]);b.renderBars(c.Domain);document.querySelector(b.options.percentage+" div.bar").style.width=c.Progress+"%";document.querySelector(b.options.step).textContent=c.Step;document.querySelector(b.options.substep).textContent=c.Substep;1==c.HasRun?b.complete(c):setTimeout(function(){b.step(c)},10)}},l=function(){Solo.Ajax.ajax(b.options.akeebaUrl+b.options.domainUrl,
{cache:!1,dataType:"text",beforeSend:function(){document.querySelector(b.options.loading).style.display="block"},success:function(a){a=/###(.*?)###/.exec(a);b.domains=JSON.parse(a[1]);document.querySelector(b.options.loading).style.display="none";document.querySelector(b.options.pane).style.display="block";b.continueAfterLoad()}})},g=function(){var a=0,c=setInterval(function(){a++;document.querySelector(b.options.timer+" div.text").textContent=Solo.Alice.translations["UI-LASTRESPONSE"].replace("%s",
a.toFixed(0))},1E3),e=document.querySelector(b.options.timer);Solo.System.data.set(e,"akeebatimer",c)},h=function(){var a=document.querySelector(b.options.timer),a=Solo.System.data.get(a,"akeebatimer");clearInterval(a);document.querySelector(b.options.timer+" div.text").textContent=Solo.Alice.translations["UI-LASTRESPONSE"].replace("%s","0")};this.init=function(){l()};this.continueAfterLoad=function(){this.renderBars();g();this.start()};this.renderBars=function(a){void 0==a&&(a="");var c="label-success",
e;document.querySelector(b.options.steps).innerHTML="";for(var d=0;d<this.domains.length;d++){e=this.domains[d];var f=document.createElement("div");f.className="label";f.textContent=e[1];Solo.System.data.set(f,"domain",e[0]);document.querySelector(b.options.steps).appendChild(f);e[0]==a?(c="",e="label-info"):e=c;f.className+=" "+e}};this.start=function(){this.options.onBeforeStart(d);d.data.ajax="start";Solo.Ajax.ajax(b.options.akeebaUrl+this.options.pollingUrl,d)};this.step=function(a){this.options.onBeforeStep(d,
a);h();g();d.data.ajax="step";Solo.Ajax.ajax(b.options.akeebaUrl+this.options.pollingUrl,d)};this.complete=function(a){h();this.options.onComplete(a)}}; //# sourceMappingURL=stepper.min.map
