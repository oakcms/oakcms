/*
   2014-2017 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license     GNU GPL version 3 or later
*/
if("undefined"==typeof Solo)var Solo={};"undefined"==typeof Solo.System&&(Solo.System={},Solo.System.notification={hasDesktopNotification:!1,iconURL:""},Solo.System.params={AjaxURL:"",useIFrame:!1,errorCallback:Solo.System.modalErrorHandler,iFrame:null,iFrameCallbackError:null,iFrameCallbackSuccess:null,password:"",errorDialogId:"errorDialog",errorDialogMessageId:"errorDialogPre"},Solo.System.translations=[],Solo.System.modalDialog=null);
Solo.System.submitForm=function(a,b){"undefined"!==typeof b&&document.querySelector("#"+a+" input[name='task']").setAttribute("value",b);document.querySelector("#"+a).submit()};Solo.System.defaultErrorHandler=function(a){null!=a&&"undefined"!=typeof a&&alert("An error has occurred\n"+a)};
Solo.System.modalErrorHandler=function(a){var b=document.getElementById(Solo.System.params.errorDialogId),c=a;null!=b&&(document.getElementById(Solo.System.params.errorDialogMessageId).innerHTML=a,c=b.innerHTML);Solo.Modal.open({content:c,width:"80%"})};Solo.System.params.errorCallback=Solo.System.modalErrorHandler;
Solo.System.doIframeCall=function(a,b,c){Solo.System.params.iFrameCallbackSuccess=b;Solo.System.params.iFrameCallbackError=c;Solo.System.params.iFrame=document.createElement("iframe");document.getElementById("response-timer");Solo.System.params.iFrame.style.display="none";Solo.System.params.iFrame.style.visibility="hidden";Solo.System.params.iFrame.style.height="1px";Solo.System.params.iFrame.setAttribute("onload",Solo.System.iframeCallback);a=Solo.System.params.AjaxURL+"&"+Solo.Ajax.interpolateParameters(a);
Solo.System.params.iFrame.setAttribute("src",a)};
Solo.System.iframeCallback=function(){var a=(Solo.System.params.iFrame.contentDocument?Solo.System.params.iFrame.contentDocument:Solo.System.params.iFrame.contentWindow.document).body.innerHTML;Solo.System.params.iFrame.parentNode.removeChild(Solo.System.params.iFrame);Solo.System.params.iFrame=null;var b=a.indexOf("###");if(-1==b)a="Invalid AJAX data: "+a,null==Solo.System.params.iFrameCallbackError?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(a):Solo.System.params.iFrameCallbackError(a);
else{0!=b&&(a.substr(0,b),a=a.substr(b));a=a.substr(3);b=a.lastIndexOf("###");a=a.substr(0,b);try{var c=JSON.parse(a)}catch(d){a=d.message+"\n<br/>\n<pre>\n"+a+"\n</pre>";null==Solo.System.params.iFrameCallbackError?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(a):Solo.System.params.iFrameCallbackError(a);return}Solo.System.params.iFrameCallbackSuccess(c)}};
Solo.System.doAjax=function(a,b,c,d,f){if(Solo.System.params.useIFrame)Solo.System.doIframeCall(a,b,c);else{null==d&&(d=!0);var e=(new Date).getTime()/1E3,g=parseInt(e,10);a._cacheBustingJunk=Math.round(1E3*(e-g))/1E3;null==f&&(f=6E5);a={type:"POST",url:Solo.System.params.AjaxURL,cache:!1,data:a,timeout:f,success:function(a){var d=a.indexOf("###");if(-1==d)a=Solo.System.sanitizeErrorMessage(a),a="Invalid AJAX data: "+a,null==c?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(a):
c(a);else{0!=d&&(a.substr(0,d),a=a.substr(d));a=a.substr(3);d=a.lastIndexOf("###");a=a.substr(0,d);try{var e=JSON.parse(a)}catch(h){a=Solo.System.sanitizeErrorMessage(a);a=h.message+"\n<br/>\n<pre>\n"+a+"\n</pre>";null==c?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(a):c(a);return}b(e)}},error:function(a,b,d){d=a.responseText?a.responseText:"";var e="<strong>AJAX Loading Error</strong><br/>HTTP Status: "+a.status+" ("+a.statusText+")<br/>",e=e+"Internal status: "+b+"<br/>XHR ReadyState: "+
a.readyState+"<br/>",e=e+"Raw server response:<br/>"+Solo.System.sanitizeErrorMessage(d);null==c?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(e):c(e)}};d?Solo.Ajax.enqueue(a):Solo.Ajax.ajax(a)}};Solo.System.sanitizeErrorMessage=function(a){-1<a.indexOf("<script")&&(a="(HTML containing script tags)");return a};
Solo.System.doEncryptedAjax=function(a,b,c,d,f){null==d&&(d=!0);var e=(new Date).getTime()/1E3,g=parseInt(e,10);a._cacheBustingJunk=Math.round(1E3*(e-g))/1E3;null==f&&(f=6E5);a=JSON.stringify(a);0<Solo.System.params.password.length&&(a=AesCtr.encrypt(a,Solo.System.params.password,128));f={type:"POST",url:Solo.System.params.AjaxURL,cache:!1,data:{json:a},timeout:f,success:function(a){var d=a.indexOf("###");if(-1==d)a="Invalid AJAX data: "+a,null==c?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(a):
c(a);else{0!=d&&(a.substr(0,d),a=a.substr(d));a=a.substr(3);d=a.lastIndexOf("###");a=a.substr(0,d);0<Solo.System.params.password.length&&(a=AesCtr.decrypt(a,Solo.System.params.password,128));try{var e=JSON.parse(a)}catch(h){errorMessage=h.message+"\n<br/>\n<pre>\n"+a+"\n</pre>";null==c?null!=Solo.System.params.errorCallback&&Solo.System.params.errorCallback(errorMessage):c(errorMessage);return}b(e)}},error:function(a,b,d){a="AJAX Loading Error: "+b;null==c?null!=Solo.System.params.errorCallback&&
Solo.System.params.errorCallback(a):c(a)}};d?akeeba.Ajax.enqueue(f):akeeba.Ajax.ajax(f)};Solo.System.checkAll=function(a,b){b||(b="cb");if(a.form){for(var c=0,d=0,f=a.form.elements.length;d<f;d++){var e=a.form.elements[d];e.type==a.type&&(b&&0==e.id.indexOf(b)||!b)&&(e.checked=a.checked,c+=1==e.checked?1:0)}a.form.boxchecked&&(a.form.boxchecked.value=c);return!0}return!1};
Solo.System.isChecked=function(a,b){"undefined"===typeof b&&(b=document.getElementById("adminForm"));1==a?b.boxchecked.value++:b.boxchecked.value--};Solo.System.tableOrdering=function(a,b,c,d){"undefined"===typeof d&&(d=document.getElementById("adminForm"));d.filter_order.value=a;d.filter_order_Dir.value=b;Solo.System.submitForm(d.getAttribute("id"),c)};
Solo.System.modal=function(a){try{"undefined"!==typeof a.rel&&(rel=a.rel,a=JSON.parse(rel))}catch(k){}var b=document.createElement("div");e.setAttribute("tabindex","-1");e.setAttribute("role","dialog");e.setAttribute("aria-hidden","true");e=document.createElement("div");e.className="modal-dialog";b.appendChild(e);var c=document.createElement("div");c.className="modal-content";e.appendChild(c);if("undefined"!==typeof a.title){e=document.createElement("div");e.className="modal-header";c.appendChild(e);
var d=document.createElement("button");d.className="close";d.innerHTML="&times;";e.appendChild(d);var f=document.createElement("h4");f.className="modal-title";f.innerHTML=a.title;e.appendChild(f);"undefined"!==typeof a.CancelHandler&&Solo.System.addEventListener(d,"click",function(c){var d=a.CancelHandler;Solo.System.modalDialog.close();d(b);c.preventDefault()})}var e=document.createElement("div");e.className="modal-body";c.appendChild(e);if("undefined"===typeof a.href)e.innerHTML=a.body;else if("#"==
a.href.substr(0,1))for(d=window.document.querySelector(a.href);0<d.childNodes.length;)e.appendChild(d.childNodes[0]);else d=document.createElement("iframe"),d.src=a.href,d.width="100%",d.height=400,d.frameborder=0,d.allowtransparency=!0,e.appendChild(d),"undefined"!==typeof a.iFrameHeight&&(d.height=a.iFrameHeight),"undefined"!==typeof a.iFrameWidth&&(d.width=a.iFrameWidth);e=!0;"undefined"!==typeof a.showButtons&&(e=a.showButtons);if(e){e=document.createElement("div");e.className="modal-footer";
c.appendChild(e);c=Solo.System.translations["UI-MODAL-OK"];d=Solo.System.translations["UI-MODAL-CANCEL"];"undefined"!==typeof a.OkLabel&&(c=a.OkLabel);"undefined"!==typeof a.CancelLabel&&(d=a.CancelLabel);f=document.createElement("button");f.className="btn btn-default";f.setAttribute("type","button");f.innerHTML=d;e.appendChild(d);var g=document.createElement("button");g.className="btn btn-primary";g.setAttribute("type","button");g.innerHTML=c;e.appendChild(g);"undefined"!==typeof a.CancelHandler&&
Solo.System.addEventListener(f,"click",function(c){var d=a.CancelHandler;Solo.System.modalDialog.close();d(b);c.preventDefault()});"undefined"!==typeof a.OkHandler?Solo.System.addEventListener(g,"click",function(c){var d=a.OkHandler;Solo.System.modalDialog.close();d(b);c.preventDefault()}):Solo.System.addEventListener(g,"click",function(a){Solo.System.modalDialog.close();a.preventDefault()});""==c.trim()&&(g.style.display="none");""==d.trim()&&(f.style.display="none")}Solo.System.modalDialog=Solo.Modal.open({inherit:b,
width:"450",height:"280"})};Solo.System.notification.askPermission=function(){void 0!=window.Notification&&"default"==window.Notification.permission&&window.Notification.requestPermission()};Solo.System.notification.notify=function(a,b,c){void 0!=window.Notification&&"granted"==window.Notification.permission&&(void 0==c&&(c=5E3),void 0==b&&(body=""),a=new window.Notification(a,{body:b,icon:Solo.System.notification.iconURL}),0<c&&setTimeout(function(a){return function(){a.close()}}(a),c))};
Solo.System.data=function(){var a=0,b={};return{set:function(c,d,f){if(c.dataset)c.dataset[d]=f,null==f&&delete c.dataset[d];else{var e;void 0===c.myCustomDataTag&&(e=a++,c.myCustomDataTag=e);"undefined"==typeof b[e]&&(b[e]={});b[e][d]=f;var g="data-"+d.split(/(?=[A-Z])/).join("-").toLowerCase();c.setAttribute&&c.setAttribute(g,f);if(null==f)try{delete b[e][d],c.removeAttribute(g)}catch(k){b[e][d]=null}}},get:function(a,d,f){if(a.dataset)return"undefined"==typeof a.dataset[d]&&(a.dataset[d]=f),a.dataset[d];
"undefined"==typeof f&&(f=null);"undefined"==typeof b[a.myCustomDataTag]&&(b[a.myCustomDataTag]={});var c="data-"+d.split(/(?=[A-Z])/).join("-").toLowerCase();"undefined"!==typeof a[c]&&(b[a.myCustomDataTag][d]=a[c]);"undefined"==typeof b[a.myCustomDataTag][d]&&this.set(a,d,f);return b[a.myCustomDataTag][d]}}}();
Solo.System.addEventListener=function(a,b,c){function d(a){var b=c.apply(this,arguments);!1===b&&(a.stopPropagation()&&a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1);return b}"string"===typeof a&&(a=document.getElementById(a));null!=a&&"object"==typeof a&&a instanceof Element&&(a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+b,function(){var b=c.call(a,window.event);!1===b&&(window.event.returnValue=!1,window.event.cancelBubble=!0);return b}))};
Solo.System.removeEventListener=function(a,b,c){"string"===typeof a&&(a=document.getElementById(a));null!=a&&"object"==typeof a&&a instanceof Element&&(a.removeEventListener?a.removeEventListener(b,c):a.detachEvent("on"+b,c))};
Solo.System.triggerEvent=function(a,b){if("undefined"!=typeof a&&null!==a&&("string"===typeof a&&(a=document.getElementById(a)),null!==a&&"object"==typeof a&&a instanceof Element))if(document.fireEvent&&"undefined"==typeof window.Event)a.fireEvent("on"+b);else{var c=document.createEvent("HTMLEvents");c.initEvent(b,!0,!0);a.dispatchEvent(c)}};
(function(a,b){function c(){if(!e){e=!0;for(var a=0;a<f.length;a++)f[a].fn.call(window,f[a].ctx);f=[]}}function d(){"complete"===document.readyState&&c()}b=b||Solo.System;var f=[],e=!1,g=!1;b[a||"documentReady"]=function(a,b){e?setTimeout(function(){a(b)},1):(f.push({fn:a,ctx:b}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(c,1):g||(g=!0,document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",
c,!1)):(document.attachEvent("onreadystatechange",d),window.attachEvent("onload",c))))}})("documentReady",Solo.System);Solo.System.addClass=function(a,b){if(a&&a.className){var c=a.className.split(" ");"string"==typeof b&&(b=b.split(" "));c=array_merge(c,b);a.className="";for(property in c)c.hasOwnProperty(property)&&(a.className+=c[property]+" ");a.className.trim&&(a.className=a.className.trim())}};
Solo.System.removeClass=function(a,b){if(a&&a.className){var c=a.className.split(" ");"string"==typeof b&&(b=b.split(" "));c=array_diff(c,b);a.className="";for(property in c)c.hasOwnProperty(property)&&(a.className+=c[property]+" ");a.className.trim&&(a.className=a.className.trim())}};Solo.System.hasClass=function(a,b){if(a&&a.className){var c=a.className.split(" ");for(i=0;i<c.length;i++)if(c[i]==b)return!0;return!1}};
Solo.System.toggleClass=function(a,b){Solo.System.hasClass(a,b)?Solo.System.removeClass(a,b):Solo.System.addClass(a,b)}; //# sourceMappingURL=system.min.map
